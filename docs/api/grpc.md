---
title: 'Gadget gRPC API'
sidebar_position: 30
description: 'Reference documentation for the gRPC API'
---


## api.proto

[pkg/gadget-service/api/api.proto](https://github.com/inspektor-gadget/inspektor-gadget/blob/main/pkg/gadget-service/api/api.proto)

This code defines a Protocol Buffers (protobuf) schema for a service that manages and interacts with gadgets, within a cloud-native environment such as Kubernetes. The schema is written using the proto3 syntax and is intended to generate Go code for interacting with the Inspektor Gadget service.

## Overview
The protobuf schema defines multiple services, messages, and enumerations that describe how clients can interact with gadgets. Gadgets are tools or components that perform specific tasks within a system. The services defined in this schema allow clients to retrieve information about gadgets, run them, and manage their operations.

## Services
1. BuiltInGadgetManager:
`GetInfo(InfoRequest) returns (InfoResponse)`: This RPC retrieves information about the gadget service, including version information, catalog data, and other metadata.
RunBuiltInGadget(stream BuiltInGadgetControlRequest) returns (stream GadgetEvent): This RPC runs a built-in gadget. The client sends a stream of control requests (e.g., to start or stop the gadget), and the service responds with a stream of events generated by the gadget.
2. GadgetManager:
`GetGadgetInfo(GetGadgetInfoRequest) returns (GetGadgetInfoResponse)`: This RPC retrieves detailed information about a specific gadget, including its parameters, data sources, and other metadata.
RunGadget(stream GadgetControlRequest) returns (stream GadgetEvent): This RPC runs a gadget (not necessarily built-in) and manages its lifecycle, similar to the RunBuiltInGadget method.

## Messages
1. `BuiltInGadgetRunRequest`:
Describes a request to run a built-in gadget, specifying its name, category, parameters, nodes to run on, log level, and timeout.
2. `GadgetRunRequest`:
Similar to BuiltInGadgetRunRequest, but for non-built-in gadgets. It includes fields like imageName, paramValues, and version.
3. `BuiltInGadgetStopRequest & GadgetStopRequest`:
Simple messages used to stop a running gadget.
4. `GadgetEvent`:
Represents an event generated by a running gadget. It includes the event type, sequence number, payload, and data source ID.
5. `BuiltInGadgetControlRequest & GadgetControlRequest`:
These messages are used to control the execution of a gadget, allowing the client to either start or stop a gadget.
6. `InfoRequest & InfoResponse`:
InfoRequest is used to request information about the gadget service, and InfoResponse contains the response, including version information, a catalog, and other metadata.
7. `DataElement & GadgetData`:
DataElement represents a piece of data, and GadgetData aggregates these data elements, associating them with a node and a sequence number.
8. `GadgetDataArray`:
Represents an array of DataElement objects, useful for collecting multiple pieces of data from a gadget.
9. `Param`:
Describes a parameter that can be used by a gadget. It includes a key, description, default value, type hint, and other metadata.
10. `GadgetInfo`:
Contains detailed information about a gadget, including its name, associated image, data sources, and parameters.
11. `Datasource`:
Describes a data source associated with a gadget, including its ID, name, type, fields, and other metadata.
12. `Field`:
Represents a field within a data source, including its name, offset, size, type, and various flags.
## Enumerations
1. Kind
An enumeration that defines various data types that a field can have, such as Bool, Int8, Int16, String, etc.
## Key Concepts
`Gadgets`: Tools or components that perform specific functions within the system. They can be built-in or custom.\
`Data Sources`: Gadgets produce data that is structured in fields within data sources.\
`Parameters`: Gadgets can be configured with various parameters that control their behavior.\
`Events`: Gadgets emit events during their operation, which can be monitored and processed by clients.

## gadgettracermanager.proto

[pkg/gadgettracermanager/api/gadgettracermanager.proto](https://github.com/inspektor-gadget/inspektor-gadget/blob/main/pkg/gadgettracermanager/api/gadgettracermanager.proto)

## Overview
The GadgetTracerManager service provides an interface for managing and interacting with container tracers. It allows clients to receive tracing data streams, add or remove containers from tracing, and debug the state of the tracing operations.
## Services
 1.GadgetTracerManager

- **`ReceiveStream(TracerID) returns (stream StreamData)`**: 
  - This RPC is used to receive a stream of tracing data associated with a specific tracer ID. It is intended to be called via `kubectl exec` or a similar command-line interface.

- **`AddContainer(ContainerDefinition) returns (AddContainerResponse)`**: 
  - This RPC is used by OCI (Open Container Initiative) hooks to add a container to the tracing system. It accepts a `ContainerDefinition` and returns an `AddContainerResponse` containing debug information.

- **`RemoveContainer(ContainerDefinition) returns (RemoveContainerResponse)`**: 
  - This RPC is used by OCI hooks to remove a container from the tracing system. It accepts a `ContainerDefinition` and returns a `RemoveContainerResponse` with debug information.

- **`DumpState(DumpStateRequest) returns (Dump)`**: 
  - This RPC is used for debugging purposes. It returns a `Dump` object that contains the current state of containers, traces, and stacks in the system.

## Messages
1. `Label`:
Represents a key-value pair label that can be associated with a container.
2. `AddContainerResponse`:
The response message returned after a container is added to the tracing system. It includes a debug field with debugging information.
3. `RemoveContainerResponse`:
The response message returned after a container is removed from the tracing system. It also includes a debug field with debugging information.
4. `TracerID`:
Represents the ID of a tracer. This is used to identify and manage individual tracing streams.
5. `StreamData`:
Represents a line of tracing data received in the stream. Each StreamData message contains a single line of data.
6. `OwnerReference`:
Represents a reference to the owner of a Kubernetes resource, including its API version, kind, name, and UID. This message is often used to track the ownership of Kubernetes objects.
7. `ContainerDefinition`:
Describes the definition of a container within the tracing system. It includes several fields:
`id`: The unique identifier of the container.\
`pid`: The process ID (PID) of the container.\
`oci_config`: The OCI configuration associated with the container.\
`namespace`: The Kubernetes namespace in which the container is running.\
`podname`: The name of the pod containing the container.\
`name`: The name of the container.\
`labels`: A list of labels associated with the container.\
`labels_set`: A boolean indicating whether the labels are set (since some hooks may not have label information).\
8. `DumpStateRequest`:
A request message for dumping the current state of the tracing system. This message does not contain any fields and is used to initiate a state dump.
9. `Dump`
The response message containing the dumped state of the tracing system. It includes the following fields:
containers: A string representation of the containers being traced.
`traces`: A string representation of the active traces.
`stacks`: A string representation of the stack traces
## Key Concepts
`Tracing`: The process of monitoring and capturing the execution of containers. Tracing data can be used for debugging, performance monitoring, and security auditing.\
`OCI Hooks`: Open Container Initiative hooks are mechanisms that allow external programs to be executed at various points in the lifecycle of a container.\
`Streamed Data`: The tracing data is received as a continuous stream, allowing real-time monitoring of container activities.
